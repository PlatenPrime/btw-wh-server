# API дефицитов (Defs)

Модуль расчёта дефицитов. Запуск расчёта — ADMIN; получение последних дефицитов и статуса расчёта — USER.

## Эндпоинты

### POST `/api/defs/calculate`

Запуск расчёта дефицитов (pogrebi).

**Доступ:** checkAuth + checkRoles(ADMIN).

**Запрос:** body при наличии — по схеме calculatePogrebiDefs (если есть параметры).

**Ответ 200/202:** сообщение о запуске или результат расчёта (по реализации контроллера).

**Ошибки:** 400, 401, 403, 500.

---

### GET `/api/defs/latest`

Получение последних рассчитанных дефицитов.

**Доступ:** checkAuth + checkRoles(USER).

**Запрос:** без тела (query при наличии — из контроллера).

**Ответ 200:** объект с данными дефицитов (массив или message/data).

**Ошибки:** 401, 403, 500.

---

### GET `/api/defs/calculation-status`

Статус текущего или последнего расчёта дефицитов.

**Доступ:** checkAuth + checkRoles(USER).

**Запрос:** без тела.

**Ответ 200:** объект со статусом (статус, прогресс и т.д.).

**Ошибки:** 401, 403, 500.
